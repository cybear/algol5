{
  "meta": {
    "id": "kickrun",
    "name": "Kick & run",
    "source": "http://www.di.fc.ul.pt/~jpn/gv/kickrun.htm",
    "tags": ["infiltrate","differentunits","capture"],
    "tagline": "A quick and fierce battle to invade the opposite corner",    
    "instructions": {
      "startTurn": "Select which unit to move",
      "selectunit": ["ifelse",
        ["anyat","runners","selectunit"],
        ["line","Select where to move your","selectunit","bishop"],
        ["line","Select where to move your","selectunit","pawn"]
      ],
      "selectmovetarget": ["line",
        "Press","move","to",["ifelse",
          ["anyat","runners","selectunit"],
          ["line","slide your bishop from","selectunit","to","selectmovetarget"],
          ["line","move your pawn from","selectunit","to","selectmovetarget",
            ["if",["anyat","units","selectmovetarget"],"and capture the enemy there"]
          ]
        ]
      ]
    }
  },
  "graphics": {"tiles":{"corners":"playercolour"},"icons":{"runners":"bishop","sidekickers":"pawn"}},
  "board": {
    "height":5,"width":5,
    "terrain": { "corners": {"1":["a1"],"2":["e5"]} }
  },
  "setup": {
    "runners": {"1":["a2","b1"], "2": ["d5","e4"] },
    "sidekickers": {"1":["a1","c1","a3"], "2": ["c5","e5","e3"] }
  },
  "startTurn": {
    "link": "selectunit"
  },
  "marks": {
    "selectunit": {
      "from": "myunits",
      "runGenerator": "findmovetargets",
      "link": "selectmovetarget"
    },
    "selectmovetarget": {
      "from": "movetargets",
      "link": "move"
    }
  },
  "commands": {
    "move": {
      "applyEffect": ["stompat","selectunit","selectmovetarget"],
      "link": "endturn"
    }
  },
  "endGame": {
    "infiltration": {"condition":["overlaps","myrunners","oppcorners"],"show":["intersect","myrunners","oppcorners"]}
  },
  "generators": {
    "findmovetargets": {
      "type": "walker",
      "start": "selectunit",
      "dirs": ["playercase",
        ["ifelse",["anyat","myrunners","selectunit"],[1,2,3],[8,1,3,4]],
        ["ifelse",["anyat","myrunners","selectunit"],[5,6,7],[4,5,7,8]]
      ],
      "max": ["ifelse",["anyat","myrunners","selectunit"],4,1],
      "blocks": "units",
      "draw": {
        "steps": {
          "condition": ["and",
            ["different",["dir"],8],
            ["different",["dir"],4]
          ],
          "tolayer": "movetargets"
        },
        "block": {
          "condition": ["and",
            ["anyat","oppunits",["target"]],
            ["or",
              ["same",["dir"],8],
              ["same",["dir"],4]
            ]
          ],
          "tolayer": "movetargets"
        }
      }
    }
  }
}