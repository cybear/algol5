{
  "meta": {
    "name": "Amazons",
    "source": "http://www.chessvariants.org/other.dir/amazons.html",
    "tags": ["deploy","starve"],
    "author": "Walter Zamkauskas",
    "year": 1988
  },
  "graphics": {
    "icons": { "queens": "queens", "fires": "pawns" }
  },
  "board": { "height": 10, "width": 10 },
  "setup": {
    "queens": {"1":["d10","g10","a7","j7"],"2":["a4","d1","g1","j4"]}
  },
  "startTurn": {
    "link": "selectunit",
    "instruction": "Select an amazon to move and fire with"
  },
  "marks": {
    "selectunit": {
      "from": "myunits",
      "runGenerator": "findtargets",
      "link": "selectmovetarget",
      "instruction": "Select where to move the amazon"
    },
    "selectmovetarget": {
      "nodeadends": true,
      "from": "targets",
      "link": "move",
      "instruction": "Choose Move to go here!"
    },
    "selectfiretarget": {
      "from": "targets",
      "link": "fire",
      "instruction": "Choose Fire to shoot here!"
    }
  },
  "commands": {
    "move": {
      "applyEffects": [
        ["moveat","selectunit","selectmovetarget"],
        ["setturnpos","movedto","selectmovetarget"]
      ],
      "runGenerator": "findtargets",
      "link": "selectfiretarget",
      "instruction": "Now select where to fire at"
    },
    "fire": {
      "applyEffect": ["spawn","selectfiretarget","fires",0,{"from":["turnpos","movedto"]}],
      "link": "endturn"
    }
  },
  "generators": {
    "findtargets": {
      "type": "walker",
      "dirs": [1,2,3,4,5,6,7,8],
      "start": ["actionor","selectunit","selectunit",["turnpos","movedto"]],
      "blocks": "units",
      "draw": {
        "steps": {
          "tolayer": "targets"
        }
      }
    }
  },
  "AI": {
    "generators": {
      "findroads": {
        "type": "neighbour",
        "dirs": [1,2,3,4,5,6,7,8],
        "starts": "queens",
        "unlessover": "units",
        "draw": {
          "start": {
            "tolayer": ["ifelse",["anyat","myunits",["start"]],"myroads","opproads"],
            "include": {
              "count": ["neighbourcount"]
            }
          }
        }
      },
      "findreach": {
        "type": "walker",
        "dirs": [1,2,3,4,5,6,7,8],
        "starts": "queens",
        "blocks": "units",
        "draw": {
          "steps": {
            "tolayer": ["ifelse",["anyat","myunits",["start"]],"myreach","oppreach"]
          }
        }
      }
    },
    "brains": {
      "Steve": {
        "generators": ["findroads","findreach"],
        "plus": {
          "myroads": ["harvest","myroads","count"],
          "mydomain": ["sizeof","myreach"]
        },
        "minus": {
          "opproads": ["harvest","opproads","count"],
          "oppdomain": ["sizeof","oppreach"]
        }
      }
    }
  }
}